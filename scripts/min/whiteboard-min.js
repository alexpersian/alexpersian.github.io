var $WBAPP=function(){var e={};e.canvas=document.getElementById("myCanvas"),e.width=window.innerWidth,e.height=.95*window.innerHeight,e.canvas.width=e.width,e.canvas.height=e.height,e.penColor="black",e.bgColor="white",e.penStroke=3,e.eraseStroke=30;var n,a;e.shape="Start/End",e.night=!1,document.addEventListener("touchmove",function(e){e.preventDefault()},!1),e.erasing=!1,e.erase=function(){e.erasing!==!1?(e.penColor=n,e.penStroke=a,document.getElementById("erase").innerHTML='Erase <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>',e.erasing=!1):(n=e.penColor,a=e.penStroke,e.penColor=e.bgColor,e.penStroke=e.eraseStroke,document.getElementById("erase").innerHTML='Erase <span class="glyphicon glyphicon-check" aria-hidden="true"></span>',e.erasing=!0)},e.getDate=function(){var e=new Date,n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),t=e.getHours(),o=e.getMinutes(),i=e.getSeconds();return n+"-"+a+"-"+r+"_"+t+":"+o+":"+i};var r=document.getElementById("btn-save");return r.addEventListener("click",function(n){r.download=e.getDate(),r.href=e.canvas.toDataURL("image/svg")}),e.changeColor=function(n){if(e.erasing===!0&&e.erase(),e.night)switch(n){case"black":e.penColor="#495F66";break;case"red":e.penColor="#dc322f";break;case"blue":e.penColor="#268bd2";break;case"green":e.penColor="#859900"}else e.penColor=n},e.changePenWidth=function(n){e.erasing?(a=n,document.getElementById("penDisplay").innerHTML="Pen Width: "+n+' <span class="caret"></span>'):(e.penStroke=n,document.getElementById("penDisplay").innerHTML="Pen Width: "+n+' <span class="caret"></span>')},e.changeEraserWidth=function(n){e.erasing?(e.eraseStroke=n,e.penStroke=e.eraseStroke,document.getElementById("eraseDisplay").innerHTML="Eraser Width: "+n+' <span class="caret"></span>'):(e.eraseStroke=n,document.getElementById("eraseDisplay").innerHTML="Eraser Width: "+n+' <span class="caret"></span>')},$(window).bind("beforeunload",function(){return"Save your drawing before reloading!"}),e.nightTheme=function(){if(e.night){switch(document.getElementById("night").innerHTML='Night Theme <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>',e.bgColor="#ffffff",e.penColor){case"#495F66":e.penColor="black";break;case"#dc322f":e.penColor="red";break;case"#268bd2":e.penColor="blue";break;case"#859900":e.penColor="green"}e.night=!1}else{switch(document.getElementById("night").innerHTML='Night Theme <span class="glyphicon glyphicon-check" aria-hidden="true"></span>',e.bgColor="#01191F",e.penColor){case"black":e.penColor="#495F66";break;case"red":e.penColor="#dc322f";break;case"blue":e.penColor="#268bd2";break;case"green":e.penColor="#859900"}e.night=!0}$WBPAPER.drawBackground()},e.undo=function(){$WBPAPER.removePath()},e.clear=function(){e.bgColor=e.night?"#01191F":"#ffffff",$WBPAPER.drawBackground()},e}($WBAPP=$WBAPP||{});