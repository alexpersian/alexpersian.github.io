var $WBPAPER=window.onload=function(){var e={};paper.setup($WBAPP.canvas);var o,r=new paper.Tool,a=paper.view.center;return e.drawingMode=!0,e.shapeMode=!1,e.drawBackground=function(){var e=new paper.Rectangle(new paper.Point(0,0),new paper.Point($WBAPP.width,$WBAPP.height)),o=new paper.Path.Rectangle(e);o.fillColor=$WBAPP.bgColor,paper.view.update()},e.drawBackground(),r.onMouseDown=function(r){e.shapeMode&&(a=r.point,e.drawShape(a,$WBAPP.shape)),e.drawingMode&&(o=new paper.Path({strokeColor:$WBAPP.penColor,strokeWidth:$WBAPP.penStroke,strokeCap:"round"}),o.add(r.point))},r.onMouseDrag=function(r){e.drawingMode&&o.add(r.point)},r.onMouseUp=function(){!$WBAPP.erasing&&e.drawingMode&&o.simplify()},e.removePath=function(){o&&(o.remove(),paper.view.update())},e.drawShape=function(o,r){if(e.shapeMode)switch(r){case"Terminator":new paper.Path.Rectangle({center:o,size:[200,60],fillColor:"#F7D4C9",strokeColor:$WBAPP.shapeStrokeColor,strokeWidth:2,radius:30});break;case"Process":new paper.Path.Rectangle({center:o,size:[200,60],fillColor:"#FEE9BC",strokeColor:$WBAPP.shapeStrokeColor,strokeWidth:2})}},e.loadRaster=function(e){new paper.Raster({source:e,position:paper.view.center})},e}();