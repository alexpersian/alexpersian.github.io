var $WBPAPER=window.onload=function(){paper.setup($WBAPP.canvas);var e={},n,o,r=new paper.Tool,a=paper.view.center;e.drawing=!0;var p={fill:!0,item:!0};return e.drawBackground=function(){var e=new paper.Rectangle(new paper.Point(0,0),new paper.Point($WBAPP.width,$WBAPP.height)),n=new paper.Path.Rectangle(e);n.fillColor=$WBAPP.bgColor,paper.view.update()},e.drawBackground(),r.onMouseDown=function(r){var a=paper.project.hitTest(r.point,p);a&&(console.log(a),o=a.item),e.drawing&&(n=new paper.Path({strokeColor:$WBAPP.penColor,strokeWidth:$WBAPP.penStroke,strokeCap:"round"}),n.add(r.point))},r.onMouseDrag=function(r){o&&!e.drawing&&(o.position+=r.delta),e.drawing&&n.add(r.point)},r.onMouseUp=function(r){!$WBAPP.erasing&&e.drawing&&n.simplify(),o=null},e.removePath=function(){n.remove(),paper.view.update()},e}();